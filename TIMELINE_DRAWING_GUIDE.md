# 🎨 Timeline Comparison 绘制教程

## 📋 **什么是 Timeline Comparison？**

Timeline Comparison 是一个**时间轴对比图**，用来直观展示三种解码方法的执行流程：
1. Autoregressive (AR) - 串行解码
2. Linear Speculative Decoding - 两阶段（draft + verify）
3. DynaTree - 树形并行验证

**参考**: SpecInfer Figure 1(b)

---

## 🎯 **你要画什么？**

### **整体布局**（三个时间轴，从上到下）

```
┌─────────────────────────────────────────────────────────────────┐
│                    Timeline Comparison                           │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  (a) Autoregressive Decoding (AR)                               │
│  ├───────┬───────┬───────┬───────┬───────┐                      │
│  │ LLM→t1│ LLM→t2│ LLM→t3│ LLM→t4│ LLM→t5│                      │
│  └───────┴───────┴───────┴───────┴───────┘                      │
│     [每次生成一个 token，串行执行]                               │
│                                                                  │
│  (b) Linear Speculative Decoding                                │
│  ┌──────────────┐┌──────────────┐┌──────────────┐              │
│  │Draft:        ││Verify:       ││Draft:        │              │
│  │t1→t2→t3→t4→t5││LLM Verify    ││t3→t4→t5→t6   │              │
│  │      ↓       ││Accept:t1,t2  ││      ↓       │              │
│  └──────────────┘└──────────────┘└──────────────┘              │
│     [Draft 串行生成多个候选，LLM 并行验证]                      │
│                                                                  │
│  (c) DynaTree (Tree-based Speculative Decoding)                 │
│  ┌──────────────┐┌──────────────┐┌──────────────┐              │
│  │Draft Tree:   ││Tree Verify:  ││Draft Tree:   │              │
│  │    t1        ││LLM Verify    ││    t4        │              │
│  │   /│\        ││全树并行      ││   /│\        │              │
│  │  t2 t3 t4    ││Accept:       ││  t5 t6 t7    │              │
│  │ /│\ │  │     ││t1→t2→t5      ││  │  │  │     │              │
│  │t5 t6 t7 t8   ││              ││  ...  ...    │              │
│  └──────────────┘└──────────────┘└──────────────┘              │
│     [多路径并行 draft，全树并行验证，接受最长路径]              │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## 🛠️ **绘制工具选择**

### **Option 1: draw.io (推荐，最简单)** ⭐⭐⭐⭐⭐

**优点**:
- 🆓 免费，在线使用
- 🎨 简单易用，拖拽式
- 📦 有大量现成的形状和箭头
- 💾 可导出 PDF/PNG

**网址**: https://app.diagrams.net/

**步骤**:
1. 打开 draw.io
2. 选择 "Blank Diagram"
3. 使用矩形、箭头、文本框绘制

---

### **Option 2: PowerPoint / Keynote** ⭐⭐⭐⭐

**优点**:
- 🖥️  你可能已经安装了
- 🎨 熟悉的界面
- 📊 适合画时间轴和流程图

**缺点**:
- 导出 PDF 质量可能不如专业工具

---

### **Option 3: LaTeX TikZ** ⭐⭐⭐

**优点**:
- 📐 专业的学术质量
- 🔧 完全可控

**缺点**:
- ⏰ 学习曲线陡峭
- ⌨️  需要写代码

---

### **Option 4: 手绘 + 扫描** ⭐⭐

**优点**:
- ✏️  快速原型
- 💡 自由表达

**缺点**:
- 📷 扫描质量可能不佳
- ✨ 不够专业

---

## 📐 **详细绘制步骤（以 draw.io 为例）**

### **Step 1: 设置画布**

1. 打开 https://app.diagrams.net/
2. 选择 "Create New Diagram"
3. 选择 "Blank Diagram"
4. 设置画布大小：
   - 宽度：800px
   - 高度：600px
   - 或者：A4 横向

---

### **Step 2: 画 (a) Autoregressive Decoding**

#### **2.1 画时间轴**

1. 拖一个 **Rectangle** 到画布
   - 宽度：120px
   - 高度：60px
   - 填充颜色：浅蓝色 (#E3F2FD)
   - 边框：深蓝色 (#1976D2)

2. 在矩形中添加文字：
   ```
   LLM
   ↓
   t₁
   ```

3. **复制这个矩形 5 次**，横向排列
   - 修改文字为：t₁, t₂, t₃, t₄, t₅

4. 在矩形之间画 **箭头**：
   - 选择 "Arrow" (单向箭头)
   - 从第一个矩形的右边连到第二个矩形的左边
   - 重复 4 次

5. 在最上方添加标题：
   ```
   (a) Autoregressive Decoding (AR)
   ```

6. 在最下方添加说明：
   ```
   每次只能生成一个 token，串行执行
   ```

**效果**:
```
(a) Autoregressive Decoding (AR)
┌─────┐  →  ┌─────┐  →  ┌─────┐  →  ┌─────┐  →  ┌─────┐
│ LLM │     │ LLM │     │ LLM │     │ LLM │     │ LLM │
│  ↓  │     │  ↓  │     │  ↓  │     │  ↓  │     │  ↓  │
│ t₁  │     │ t₂  │     │ t₃  │     │ t₄  │     │ t₅  │
└─────┘     └─────┘     └─────┘     └─────┘     └─────┘
        每次只能生成一个 token，串行执行
```

---

### **Step 3: 画 (b) Linear Speculative Decoding**

#### **3.1 画 Draft 阶段**

1. 画一个 **大矩形** (Draft Model 区域)
   - 宽度：200px
   - 高度：80px
   - 填充颜色：浅绿色 (#E8F5E9)
   - 边框：深绿色 (#388E3C)

2. 在矩形中添加文字：
   ```
   Draft Model
   t₁ → t₂ → t₃ → t₄ → t₅ → t₆
   ```

3. 用箭头表示顺序：
   - 在每个 token 之间画小箭头

#### **3.2 画 Verify 阶段**

1. 在 Draft 矩形右边画另一个矩形 (Verify 区域)
   - 宽度：200px
   - 高度：80px
   - 填充颜色：浅橙色 (#FFF3E0)
   - 边框：深橙色 (#F57C00)

2. 在矩形中添加文字：
   ```
   LLM Verify
   [t₁, t₂, t₃, t₄, t₅, t₆]
   并行验证
   ✓ Accept: t₁, t₂
   ```

#### **3.3 画下一轮 Draft**

1. 在 Verify 矩形右边再画一个 Draft 矩形
   - 类似第一个 Draft，但 token 从 t₃ 开始

2. 用粗箭头连接三个矩形

3. 添加标题和说明：
   ```
   (b) Linear Speculative Decoding
   Draft 串行生成候选，LLM 并行验证，接受部分 tokens
   ```

**效果**:
```
(b) Linear Speculative Decoding
┌─────────────┐  →  ┌─────────────┐  →  ┌─────────────┐
│ Draft Model │     │ LLM Verify  │     │ Draft Model │
│ t₁→t₂→t₃→   │     │[t₁..t₆]    │     │ t₃→t₄→...   │
│   →t₄→t₅→t₆ │     │并行验证     │     │             │
│             │     │✓Accept:t₁,t₂│     │             │
└─────────────┘     └─────────────┘     └─────────────┘
     Draft 串行生成候选，LLM 并行验证
```

---

### **Step 4: 画 (c) DynaTree**

#### **4.1 画 Draft Tree 阶段**

1. 画一个大矩形 (Draft Tree 区域)
   - 宽度：220px
   - 高度：100px
   - 填充颜色：浅紫色 (#F3E5F5)
   - 边框：深紫色 (#7B1FA2)

2. **在矩形内画树形结构**:

**方法 A: 用线条和圆圈**
   - 在中心画一个圆圈（t₁）
   - 从 t₁ 向下画 3 条线
   - 在每条线的末端画圆圈（t₂ₐ, t₂ᵦ, t₂ᵨ）
   - 继续向下扩展（t₃ₐ, t₃ᵦ, t₃ᵨ）

**方法 B: 用文字示意**
   ```
   Draft Model
        t₁
      / | \
    t₂ₐ t₂ᵦ t₂ᵨ
    /|  |  |\
  t₃ₐ.. .. .. t₃ᵨ
  ```

3. 在树旁边标注：
   ```
   多路径并行探索
   ```

#### **4.2 画 Tree Verify 阶段**

1. 在 Draft Tree 右边画矩形 (Verify 区域)
   - 宽度：200px
   - 高度：100px
   - 填充颜色：浅红色 (#FFEBEE)
   - 边框：深红色 (#C62828)

2. 在矩形中添加文字：
   ```
   LLM TreeVerify
   全树并行验证
   
   ✓ Accept Path:
   t₁ → t₂ᵦ → t₃ᵨ
   ```

3. 用粗箭头连接 Draft Tree 和 Verify

#### **4.3 画下一轮**

1. 在右边再画一个 Draft Tree
   - 从接受的路径（t₁→t₂ᵦ→t₃ᵨ）继续

2. 添加标题和说明：
   ```
   (c) DynaTree (Tree-based Speculative Decoding)
   多路径并行 draft，全树并行验证，接受最长有效路径
   ```

**效果**:
```
(c) DynaTree
┌───────────────┐  →  ┌──────────────┐  →  ┌───────────────┐
│ Draft Tree    │     │ LLM TreeVerify│     │ Draft Tree    │
│      t₁       │     │ 全树并行验证  │     │      t₄       │
│    / | \      │     │              │     │    / | \      │
│  t₂ₐ t₂ᵦ t₂ᵨ  │     │ ✓Accept Path:│     │  t₅ₐ t₅ᵦ t₅ᵨ  │
│  /|  |  |\    │     │ t₁→t₂ᵦ→t₃ᵨ  │     │  ...  ...    │
│ t₃... ... t₃ᵨ │     │              │     │              │
└───────────────┘     └──────────────┘     └───────────────┘
   多路径并行 draft，全树并行验证，接受最长有效路径
```

---

### **Step 5: 添加对比元素**

#### **5.1 添加时间轴标记**

在每个时间轴下方添加时间刻度：
```
Time: ─┬───┬───┬───┬───┬───→
       0   1   2   3   4   5
```

#### **5.2 用颜色突出对比**

- **AR**: 蓝色系 - 强调串行
- **Linear**: 绿色/橙色 - 强调两阶段
- **DynaTree**: 紫色/红色 - 强调树形并行

#### **5.3 添加图例**

在右上角添加：
```
图例：
□ Draft Model  (生成候选)
□ LLM Verify   (并行验证)
→ 串行执行
⇒ 批量并行
```

---

## 🎨 **配色建议**

### **学术风格配色**

```
AR (Autoregressive):
  - 主色：#1976D2 (蓝色)
  - 辅色：#E3F2FD (浅蓝色)

Linear Speculative:
  - Draft: #388E3C (绿色) / #E8F5E9 (浅绿色)
  - Verify: #F57C00 (橙色) / #FFF3E0 (浅橙色)

DynaTree:
  - Draft Tree: #7B1FA2 (紫色) / #F3E5F5 (浅紫色)
  - Tree Verify: #C62828 (红色) / #FFEBEE (浅红色)
```

### **箭头样式**

```
串行连接:  ────→  (细箭头)
并行传输:  ━━━━⇒  (粗箭头)
接受路径:  ····→  (虚线箭头)
```

---

## 📏 **尺寸建议**

### **矩形大小**

```
AR 单元:        120px × 60px
Linear Draft:   200px × 80px
Linear Verify:  200px × 80px
Tree Draft:     220px × 100px
Tree Verify:    200px × 100px
```

### **间距**

```
矩形之间间距:  30px
时间轴之间间距: 150px
边距:          50px
```

### **字体**

```
标题 (a/b/c):  14pt, Bold
内容文字:      11pt, Regular
说明文字:      9pt, Italic
```

---

## 📝 **文字内容模板**

### **标题和说明**

```latex
(a) Autoregressive Decoding (AR)
    串行解码，每次生成一个 token

(b) Linear Speculative Decoding
    Draft model 串行生成候选，LLM 并行验证部分 tokens

(c) DynaTree (Tree-based Speculative Decoding)
    Draft model 生成树形候选，LLM 全树并行验证，接受最长路径
```

---

## 💡 **绘制技巧**

### **Tip 1: 先画草图**

1. 用纸笔快速画出布局
2. 确定比例和位置
3. 再用软件精确绘制

### **Tip 2: 使用网格对齐**

在 draw.io 中：
- View → Grid (显示网格)
- View → Snap to Grid (对齐网格)

### **Tip 3: 复用元素**

- 画好一个矩形后，复制粘贴
- 使用 "Format Painter" 统一样式

### **Tip 4: 分层绘制**

1. 第一层：背景矩形
2. 第二层：箭头和连线
3. 第三层：文字标注

### **Tip 5: 导出高质量**

- 导出为 PDF (矢量格式)
- 或导出为 PNG (300 DPI)

---

## 🖼️ **参考示例（ASCII 艺术）**

```
╔═══════════════════════════════════════════════════════════════╗
║                  Timeline Comparison                           ║
╠═══════════════════════════════════════════════════════════════╣
║                                                                ║
║ (a) Autoregressive Decoding                                   ║
║ ┌─────┐→┌─────┐→┌─────┐→┌─────┐→┌─────┐                      ║
║ │LLM  │ │LLM  │ │LLM  │ │LLM  │ │LLM  │                      ║
║ │→ t₁ │ │→ t₂ │ │→ t₃ │ │→ t₄ │ │→ t₅ │                      ║
║ └─────┘ └─────┘ └─────┘ └─────┘ └─────┘                      ║
║                                                                ║
║─────────────────────────────────────────────────────────────  ║
║                                                                ║
║ (b) Linear Speculative Decoding                               ║
║ ┌──────────┐  ⇒  ┌──────────┐  ⇒  ┌──────────┐              ║
║ │  Draft   │     │   LLM    │     │  Draft   │              ║
║ │ t₁→t₂→t₃ │     │  Verify  │     │ t₃→t₄→t₅ │              ║
║ │ →t₄→t₅→t₆│     │[t₁...t₆] │     │  →t₆→t₇  │              ║
║ │          │     │✓t₁,t₂    │     │          │              ║
║ └──────────┘     └──────────┘     └──────────┘              ║
║                                                                ║
║─────────────────────────────────────────────────────────────  ║
║                                                                ║
║ (c) DynaTree                                                  ║
║ ┌──────────┐  ⇒  ┌──────────┐  ⇒  ┌──────────┐              ║
║ │Draft Tree│     │TreeVerify│     │Draft Tree│              ║
║ │   t₁     │     │全树并行   │     │   t₄     │              ║
║ │  /│\     │     │          │     │  /│\     │              ║
║ │ t₂ t₃ t₄ │     │✓Accept:  │     │ t₅ t₆ t₇ │              ║
║ │ /│\ │ /│\│     │t₁→t₂→t₅  │     │  ...     │              ║
║ │t₅..    ..│     │          │     │          │              ║
║ └──────────┘     └──────────┘     └──────────┘              ║
║                                                                ║
╚═══════════════════════════════════════════════════════════════╝
```

---

## ⏱️ **时间估算**

- **熟练使用 draw.io**: 30-60 分钟
- **第一次使用**: 1-2 小时
- **使用 PowerPoint**: 1-2 小时
- **手绘 + 扫描**: 30 分钟（但质量较低）

---

## ✅ **完成检查清单**

- [ ] 三个时间轴清晰可见
- [ ] AR 显示串行执行
- [ ] Linear 显示两阶段（draft + verify）
- [ ] DynaTree 显示树形结构
- [ ] 颜色对比明显
- [ ] 文字清晰可读
- [ ] 箭头方向正确
- [ ] 添加了说明文字
- [ ] 导出为高质量 PDF/PNG

---

## 🚀 **快速开始**

1. 打开 https://app.diagrams.net/
2. 选择 "Blank Diagram"
3. 跟着上面的步骤，先画 (a) AR
4. 然后画 (b) Linear
5. 最后画 (c) DynaTree
6. 添加标题和说明
7. 导出为 PDF

---

## 💬 **如果遇到问题**

1. **树形结构不会画？**
   - 用文字示意：`t₁ / | \ t₂ₐ t₂ᵦ t₂ᵨ`
   - 或者用简化版：画 3 条平行线表示多路径

2. **时间不够？**
   - 先画简化版（只画关键元素）
   - 后续再优化

3. **不满意？**
   - 多尝试几次
   - 参考 SpecInfer 原图调整

---

## 📚 **参考资源**

- **SpecInfer 原图**: 论文 Figure 1(b)
- **draw.io 教程**: https://www.diagrams.net/doc/
- **配色工具**: https://coolors.co/
- **Unicode 符号**: https://unicode-table.com/

---

**预计时间：1-2 小时（第一次）**

**难度：⭐⭐☆☆☆（中等偏易）**

**效果价值：⭐⭐⭐⭐⭐（极高！）**

---

**Good luck! 这张图画完后，你的论文会提升一个档次！** 🎉

