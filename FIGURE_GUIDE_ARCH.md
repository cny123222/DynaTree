# Figure 1（Architecture Overview / Fig.~\ref{fig:arch}）PPT专用中文画图说明书（cm + PPT字号）

> 你只需要照着“页面尺寸 + 组件尺寸(cm) + 字号(pt) + 连接表”画，不需要理解算法。
> 目标：让读者 10 秒内看懂一次迭代：
> **Prefix/KV → Draft Tree → Adaptive Pruning → Flatten+Mask → Target Verify → Greedy Select+Commit → KV 更新 → Next iter**。

---

## 0. Quickstart（按PPT一步步照抄）

1) PowerPoint：`设计` → `幻灯片大小` → 选 **宽屏(16:9)**（推荐）。
2) 视图：打开 `对齐到网格/参考线`（可选，但会更稳）。
3) 画 1 个模块卡片：圆角矩形，设置大小为 **宽 3.85 cm × 高 5.25 cm**。
4) 复制成 6 个模块，横向排一行，模块间距 **0.55 cm**，顶边对齐。
5) 按第 2 节配色表给 6 个模块填充背景色，边框统一。
6) 按第 4 节把每个模块内部的小组件摆进去（全部给了 cm 尺寸）。
7) 画主流程箭头：(1)→(2)→(3)→(4)→(5)→(6)。
8) 画底部回环虚线箭头：(6)→(1)，标注 `t ← t + L`。
9) `文件` → `导出` → `创建PDF/XPS`：导出 **PDF**（矢量更稳定）。

---

## 1. 页面与单位说明

- 你用 PPT 完全没问题。
- PPT 的“位置与大小”面板通常是 **cm**，文字字号是 **pt**。
- 本文档所有尺寸统一：
  - **形状尺寸：cm**
  - **字体字号：pt（PPT字号）**

---

## 2. 全局规范（PPT里统一设置）

### 2.1 页面留白与模块排版

- 建议页面：16:9（宽屏）。
- **外边距**（页面四周留白）：**1.0 cm**（视觉上即可，不用死磕绝对值）。
- 6 个模块卡片：
  - 单个模块：**3.85 cm × 5.25 cm**
  - 模块间距：**0.55 cm**
  - 顶边对齐，横向一排

### 2.2 颜色（PPT里可直接输入十六进制）

- (1) Prefix/KV：填充 `#F3F4F6`
- (2) Draft (M_D)：填充 `#E8F1FF`
- (3) Pruning：填充 `#FFF4E6`
- (4) Flatten+Mask：填充 `#F1F5F9`
- (5) Verify (M_T)：填充 `#F3E8FF`
- (6) Commit：填充 `#ECFDF5`

### 2.3 线条与圆角

- 模块边框：`#2F2F2F`，线宽 **1.5 pt**
- 模块内细线（树连线/分割线）：`#6B7280`，线宽 **1.0 pt**
- 主流程箭头：`#2F2F2F`，线宽 **2.25 pt**，实线
- 回环箭头：`#6B7280`，线宽 **2.25 pt**，虚线（短划线即可）
- 圆角矩形的圆角：PPT 用黄色控制点调到“轻微圆角”（视觉相当于 ~0.25 cm 圆角即可）

### 2.4 字体与字号（全部用PPT的pt）

> 你不用追求和 LaTeX 完全一致，关键是“缩小后仍清晰”。

- **模块标题（Title）**：**14 pt**，加粗（Bold），颜色 `#111111`
- **模块正文（Text）**：**10.5 pt**，常规，颜色 `#222222`
- **小标注（节点名/小标签/小字）**：**8.5–9 pt**
- **箭头旁标注（t ← t + L）**：**9 pt**

---

## 3. 总体布局（你照这个顺序排）

从左到右 6 个模块：

(1) Prefix  →  (2) Draft model M_D  →  (3) Adaptive pruning  →  (4) Flatten+mask  →  (5) Target model M_T  →  (6) Select & commit

连线表：
- 主流程： (1)→(2)→(3)→(4)→(5)→(6)
- 回环： (6)→(1)，标注 `next iteration:  t ← t + L`

---

## 4. 模块内部摆放（cm + pt，像施工图）

> 每个模块卡片：3.85×5.25 cm。
> 统一内边距：**0.30 cm**（模块内部四周）。
> 标题区高度：**0.50 cm**。
> 内容区从标题下方开始，留 **0.15 cm** 空隙。

下面 6 个模块逐个给出：要画什么、横/竖、几个格子、尺寸是多少。

---

### (1) Prefix（左：prefix横条；右：KV叠层）

**标题**：Prefix（14pt bold）

1) Prefix 横条（横向）
- 形状：圆角矩形
- 尺寸：**1.95 cm × 0.32 cm**
- 填充：白色；边框：`#6B7280` 1.0pt
- 位置：放在模块内容区左上（靠左）
- 文字：`x_{1:t}`（9pt，居中）

2) KV 叠层（3 层）
- 单层矩形：**0.95 cm × 0.32 cm**
- 叠层偏移：每层右下偏移 **0.10 cm**
- 放在模块内容区右上
- 在最上层旁边加小字：`KV`（9pt）

**底部文字（10.5pt）**：
- Prompt / prefix  x_{1:t}
- KV cache (prefix)

---

### (2) Draft model M_D（3层小树）

**标题**：Draft model  M_D

**树节点（圆）**：直径 **0.35 cm**，白底，边框 `#6B7280` 1.0pt

**树画法（固定 3 层）**：
- 根节点 `u0`
- 第一层 3 个：`u1 u2 u3`
- 第二层 3 个：`u4 u5 u6`

**建议摆放方式（不用坐标，PPT更好操作）**：
- 先画一颗根节点居中
- 下面等间距放 3 个孩子
- 再下面等间距放 3 个叶子（不要画更多）
- 连线用 `#6B7280` 1.0pt

**小字（9pt）**：右上写 `top-B`；树下写 `depth D`

**底部文字（10.5pt，3行）**：
- Tree drafting
- top-B expansion
- depth D

---

### (3) Adaptive pruning（复制树 + 灰掉两条分支 + ×）

**标题**：Adaptive pruning

- 复制模块 (2) 的树到这里。
- 固定剪两条：`u1→u4` 和 `u3→u6`
  - 被剪的线改成浅灰 `#CBD5E1`
  - 被剪的叶子圆填充改 `#E5E7EB`
  - 叶子旁放红色 `×`（12pt，颜色 `#DC2626`）

**底部文字（10.5pt，3行）**：
- prob. threshold  τ
- node budget  N_max
- prune low-prob branches

---

### (4) Flatten + mask（左：4条列表；右：4×4网格）

**标题**：Flatten + mask

左列：BFS 列表（注意：是“竖着排的四条横条”）
- 每条横条：**1.72 cm × 0.25 cm**，圆角 0.10cm 观感即可
- 条数：**4 条**
- 条间距：**0.15 cm**
- 旁边文字（9pt）：u0 / u1 / u2 / ...

右列：mask 网格（严格 4×4）
- 格子数：**4×4**
- 每格：**0.22 cm × 0.22 cm**
- 格间距：**0.04 cm**
- 上三角填深色 `#111827`，其余填 `#E5E7EB`

**底部文字（10.5pt，2行）**：
- BFS flatten: [u0,u1,u2,...]
- tree causal mask

---

### (5) Target model M_T（左：4层Transformer；右：6格logits条带）

**标题**：Target model  M_T

左侧 Transformer 堆叠（4层）
- 每层矩形：**1.60 cm × 0.32 cm**（白底，`#6B7280` 1.0pt）
- 层数：**4**
- 层间距：**0.18 cm**
- 顶层写 `Transformer`（9pt）

右侧 logits 条带（横向 6 格）
- 外框：**1.60 cm × 0.32 cm**
- 分成 **6格**（用 5 条竖线分隔，浅灰 `#CBD5E1` 0.75pt）
- 上方写 `logits`（9pt）

**底部文字（10.5pt，3行）**：
- Verify all nodes
- one forward pass
- logits / accept signals

---

### (6) Select & commit（树 + 绿色高亮路径 + L标签 + cache）

**标题**：Select & commit

1) 树：复制模块 (2) 的树

2) 高亮路径（固定高亮 u0→u2→u5）
- 用绿色 `#16A34A` 把这两段连线加粗（线宽 **2.25 pt**）

3) L 标签（绿色小胶囊）
- 尺寸：**0.42 cm × 0.28 cm**
- 填充：`#16A34A`；文字白色（9pt）写 `L`

4) cache 图标（右下角）
- 两层小矩形叠起来：每层 **0.74 cm × 0.25 cm**，叠层偏移 0.08 cm
- 旁边两行小字（9pt）：crop / rebuild

**底部文字（10.5pt，3行）**：
- longest valid path
- commit L tokens (+1)
- update KV cache

---

## 5. 导出与自检

- 导出：PPT 直接导出 PDF。
- 自检（5秒）：读者能否一眼回答：
  - 输入是什么？（prefix+KV）
  - 谁生成树？（M_D）
  - 为什么树不会爆？（τ + N_max）
  - 为什么能并行验证？（flatten+mask+M_T one forward）
  - 提交什么？（longest valid path, commit L）
  - 下一轮怎么继续？（KV update + loop）
